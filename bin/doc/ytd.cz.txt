______________________________________________________________________________

YTD v1.10                                                    (c) 2009-12 Pepak
http://www.pepak.net/ytd                                  http://www.pepak.net
______________________________________________________________________________

Nástroj pro stahování videa z YouTube a dalších webovıch úloiš videa. Funguje 
z pøíkazové øádky, odkud pøijme libovolnı poèet URL ke staení, pøípadnì
soubor se seznamem URL. Soubory ukládá pod název z YouTube, preferuje
HD video, pokud je k dispozici.



0. OBSAH
--------
1. Podporované weby
2. Protokol HTTPS
3. Protokol RTMP
4. Protokoly MMS/RTSP
5. Playlisty
6. Konverze stáhnutıch souborù
7. Distribuèní archív
8. Konfigurace
9. Syntaxe pøíkazového øádku
10. Návratové kódy
11. Lokalizace
12. Podpora
13. Kompilace
14. Napsali o programu
15. Licence



1. PODPOROVANÉ WEBY
-------------------

Seznam podporovanıch webù vèetnì ukázkovıch URL a pøípadnıch poznámek naleznete
v souboru providers.txt.



2. PROTOKOL HTTPS
-----------------

Pro podporu protokolu HTTPS (pouívá ho napø. RockStarGames.tv) je vyadováno,
aby byly ve vašich Windows nainstalované OpenSSL knihovny (CRYPTOEAY32.DLL, 
SSLEAY32.DLL), nejlépe ve verzi 0.98. Mùete je stáhnout na stránkách projektu
OpenSSL (http://www.openssl.org).



3. PROTOKOL RTMP
----------------

Od verze 0.15 program zahrnuje podporu pro streamované video podle protokolu
RTMP. Protokol je implementován pomocí knihovny vzniklé drobnou úpravou 
projektu RTMPDUMP (http://rtmpdump.mplayerhq.hu). Tato implementace má øadu
nedostatkù, se kterımi je tøeba poèítat:

1) Neumí pøesnì urèit celkovou velikost videa. Velikost je odhadována na
   základì dosud staené velikosti, dosud staeného èasu a celkového èasu
   videa.

2) Z knihovny nejsou do Downloaderu pøedávány informace o chybách. Místo
   toho je v TEMP adresáøi uivatele generován klasickı log projektu RTMPDUMP,
   ve kterém lze pøíèiny pøípadnıch chyb dohledat.

3) Aby šlo stahovat z RTMP streamù, jsou vyadovány následující DLL knihovny:
   - RTMPDUMP_DLL.DLL - je souèástí YTD.

4) Nelze stoprocentnì detekovat, zda bylo video staeno kompletní.

Od verze 0.78 lze pøímo stahovat URL zaloená na protokolu RTMP - mùete tedy
do programu vloit adresy jako "rtmp://iconcerts.infomaniak.ch/icpreview/mp4:trk-09-black_kids_nme_awards_shows-001_site_16-9-2500.mp4".
Poadavkem ovšem je, aby pøíslušnému serveru staèila ke spuštìní videa právì
jenom adresa (a nebyly vyadovány dodateèné parametry) - v jiném pøípadì YTD
pouít nelze (pouijte RTMPDUMP).



4. PROTOKOLY MMS/RTSP
---------------------

Od verze 0.17 je podporována rodina protokolù kolem MMS a RTSP (mimo jiné
Microsoftí streamy, Real streamy a øada dalších). Protokol je implementován
pomocí knihovny vzniklé drobnou úpravou projektu MSDL (http://msdl.sf.net/).
Poèítejte s tím, e cílem bylo mít úpravu hotovou rychle a s minimem zmìn
v pùvodním projektu (podobnì jako u podpory RTMP vıše), take jsem spoustu
monıch variant prostì ignoroval; a je budu potøebovat, rozšíøím pøíslušnì
úpravy MSDL.

Pozn.: Celková velikost stahovaného streamu je jen odhad, kterı nemusí bıt
úplnì pøesnı. Klidnì se mùe stát, e pøenos skonèí v 93 % a pøesto se
ohlásí jako úspìšnı - a pøehráním skuteènì zjistíte, e stream je staen
kompletnì.

Od verze 0.78 lze pøímo stahovat URL zaloená na protokolu MMS - mùete tedy
do programu vloit adresy jako "mms://netshow.play.cz/proglas/audio_15681.wma".
Poadavkem ovšem je, aby pøíslušnému serveru staèila ke spuštìní videa právì
jenom adresa (a nebyly vyadovány dodateèné parametry) - v takovém pøípadì
YTD pouít nelze.



5. PLAYLISTY
------------

Od verze 0.19 jsou podporovány zdroje, ve kterıch je jeden poøad tvoøen
nìkolika samostatnımi mediálními soubory (napø. Markiza.sk). YouTube
Downloader momentálnì neumoòuje vybrat, které ze souborù se stáhnou a
které ne - stahují se vdy všechny.



6. KONVERZE STÁHNUTİCH SOUBORÙ
------------------------------

Od verze 0.50 podporuje YouTube Downloader funkci, která do jisté míry
umoòuje konvertovat stáhnuté soubory do jinıch formátù - nabízí rozhraní,
pomocí kterého lze po dokonèení downloadu nebo po kliknutím na pøíslušné
tlaèítko v grafickém prostøedí spustit externí aplikaci a pøedat jí jméno
stáhnutého souboru (a pøípadnì další parametry). Tato externí aplikace pak
mùe udìlat cokoliv, vèetnì konverze do jiného formátu. 

Pokud smaete konfiguraèní soubor a spustíte YouTube Downloader v grafickém
reimu, vytvoøí standardní konfiguraèní soubor, kde jsou nadefinovány tøi 
základní konverze, vyuívající program MEncoder (souèást projektu MPlayer, 
domovská stránka http://www.mplayerhq.hu) pro

a) pøevod videa do kontejneru AVI. Tato funkce je velmi rychlá a nedochází
   pøi ní ke zmìnì kvality, nemusí ale fungovat pro všechny vstupní formáty
   (napø. pro mnoho souborù .FLV, ne-li pro všechny) a hlavnì zmìní jenom
   kontejner, ale ne obsah, take pro pøehrání stále potøebujete kodeky,
   které byly potøeba pro pùvodní video. Vıznam konverze je víceménì omezen
   jen na programy, které nepodporují jiné kontejnery ne AVI.

b) konverzi videa do kontejneru AVI s kodekem XVID+MP3. Zde u jde o plnou
   rekompresi, s vlastnostmi v zásadì opaènımi ne u pøevodu kontejneru -
   je to pomalé a dochází ke ztrátì kvality, ale funguje to pro (skoro)
   všechny vstupní soubory a vısledek pak pøehrajete v kadém pøehrávaèi,
   pokud ovšem podporuje kodek XVID (to u jsou dnes snad všechny).

c) konverzi videa do kontejneru AVI s kodekem H264+MP3. Platí to samé co pro
   pøedchozí pøípad.

Pro všechny tøi varianty jsou nastaveny nìjaké základní parametry, ovšem 
zdùrazòuji, e moje zkušenosti s konverzemi jsou mizivé a tudí ty parametry
s jistotou nebudou optimální. Nebuïte tedy pøekvapeni dosaenımi vısledky.
Pokud se najde nìjakı expert ochotnı moje nastavení zoptimalizovat, budu jen
rád.

Co potøebujete udìlat pro to, aby konverze chodily:

1. Stáhnout si a nainstalovat kompletní MPlayer (obsahuje i MEncoder.exe).

2. MEncoder.exe zkopírovat do adresáøe v PATH nebo do adresáøe, kde je
   nainstalovanı YouTube Downloader.

3. Aktivovat konvertování. Slouí k tomu nastavení <converters><activated>,
   které je standardnì nastaveno na hodnotu 0 (nula) a které musíte pøepsat
   na hodnotu 1. Konfiguraèní soubor zobrazíte pøímo z programu tlaèítkem
   "Upravit konfiguraèní soubor", pak v nìm najdìte "<activated>" (bez 
   uvozovek) a pøepište nulu za ním na jednièku.

4. a) Pokud chcete automaticky zkonvertovat všechny soubory:

      V grafickém prostøedí kliknout na ikonku "Vybrat konvertovaè" (film s
      tukou) a vybrat si jeden z pøednastavenıch konvertovaèù. Od té chvíle
      budou všechny novì staené soubory pøedhozeny tomuto konvertovaèi
      (ve vıchozím stavu jeden po druhém, program je nastaven tak, aby 
      v jednu chvíli automaticky bìel jen jeden konverzní proces).

   b) Pokud chcete zkonvertovat jen soubory, které sám urèíte:

      V grafickém prostøedí vybrat jeden nebo více souborù a kliknout na
      ikonu "Zkonvertovat" (film se zelenou šipkou). Konverze bude spuštìna
      pro všechny zvolené filmy, bez ohledu na to, kolik jich je a jestli
      byly úspìšnì dokonèeny.

Od verze 1.01 je díky ffmpegmannovi ve vıchozí konfiguraci podporován i 
program FFmpeg (http://ffmpeg.org/), pro kterı jsou nadefinované ty samé
tøi základní konverze. Všechny postupy jsou v zásadì stejné, jen místo
mencoder.exe pracujete s ffmpeg.exe.

Pokroèilí uivatelé mohou zásahem do konfigurace zmìnit nastavení tìchto
úloh nebo pøidat úlohy úplnì nové. Pokud vám nevyhovuje MEncoder, mùete
pouít jinı program - a nemusíte se vùbec omezovat na programy pro konverzi
videa, funkce je napsána natolik obecnì, abyste mohli tøeba spustit nìjakı
BAT skript nebo video nìkomu poslat mailem. Popis dostupnıch nastavení je
uveden níe v sekci Konfigurace.

Ve verzi spouštìné z pøíkazového øádku tato funkce podporována není - tuto
verzi je moné skriptovat "samu od sebe" a mì pøipadá zbyteèné zavádìt
duplicitní funkci, která pøinese jen zvıšené riziko chyb a ádnou skuteènou
vıhodu.



7. DISTRIBUÈNÍ ARCHÍV
---------------------

A do verze 0.86 vèetnì byl YTD distribuován v archívu ZIP s tím, e si ho
uivatel sám rozbalí tam, kam bude potøebovat. Toto øešení jsem zvolil kvùli
tomu, aby šlo YTD snadno pøenášet mezi poèítaèi a operaèními systémy, bohuel
se ale postupnì zaèalo objevovat èím dál více lidí, kteøí prostì otevøeli
ZIP jako adresáø (od Windows XP vıše), odklikli ytd.exe, vesele ignorovali
hlášení Windows, e to nemusí fungovat správnì, pokud se nerozbalí všechny
soubory, a poté se na mì obraceli s dotazy, proè jim nefunguje stahování z
Èeské televize...

Od verze 0.87 tedy pøecházím k novému distribuènímu modelu, zaloeném na
formátu .exe. Snail jsem se ale zachovat co nejvíce vıhod tradièního 
distribuèního modelu a dokonce k nim pøidat:

1. Distribuèní archív je bìnı samorozbalovací archív ve formátu 7-zip
   (http://www.7-zip.org). Pokud tedy nemùete nebo nechcete projít bìnou
   instalací, mùete archív rozbalit pomocí 7-zipu "ruènì". Stejnì jako
   døíve YTD ádnou skuteènou instalaci nepotøebuje, staèí ho nahrát do
   libovolného adresáøe.

2. Pokud spustíte distribuèní archív, nabídne vám monost instalace, která
   pouze zkopíruje soubory do zvoleného adresáøe, volitelnì zaloí zástupce, 
   a spustí grafickou verzi YTD. Rozhodnì neprovádí ádné zápisy mimo zvolenı 
   adresáø (kromì volitelnıch zástupcù na Ploše a ve Start menu) ani v 
   registrech, take by nemìla nic poškodit.

3. Z instalátoru máte dále monost pøímo spustit YTD, bez instalace. Je to
   pomalejší (distribuèní archív stejnì musí rozbalit do doèasného adresáøe)
   a nepøátelské k firewallùm (protoe vlastní pøenosy provádí pokadé jinı
   exe soubor), ale funkènì je to plnohodnotné.

4. Pokud spustíte distribuèní archív s parametrem --gui, rovnou se spustí
   grafická verze bez instalace (jako v bodu 3, ale bez zásahu uivatele).

5. Pokud spustíte distribuèní archív s jinımi parametry, spustí se standardní
   command-line verze YTD a tyto parametry se jí pøedají. Mùete tedy napø.
   spustit stahování videa, ani byste se museli obtìovat s instalací.

6. Tento model distribuce navíc umoòuje automatickou aktualizaci programu
   (z grafického rozhraní i z pøíkazové øádky - viz parametr -u).



8. KONFIGURACE
--------------

Od verze 0.50 pouívá YouTube Downloader pro svoji konfiguraci XML soubor
"ytd.xml". Umístìn mùe bıt ve tøech místech:

1) Aktuální pracovní adresáø. Toto je primární umístìní.

2) Adresáø, ve kterém je YTD.exe. Toto umístìní se pouije, pokud v pracovním
   adresáøi konfiguraèní soubor neexistuje a v adresáøi YTD ano.

3) Adresáø "YouTube Downloader" v uivatelském profilu Windows (%APPDATA%).
   Toto umístìní se zkoumá v pøípadì, e primární XML soubor neexistuje
   nebo e je v nìm pro aplikaci vypnut pøenositelnı (portable) reim.

Konfiguraèní parametry jsou vdy ukládány jako obsahy XML tagù. V souladu
s XML standardem jsou názvy tagù citlivé na velikost písmen (case-sensitive);
jejich obsahy obecnì citlivé nejsou (case-insensitive), ale je vhodné pouívat
v nich jen malá písmena. Logické hodnoty (ano-ne) jsou ukládány jako "1" (ano)
a "0" (ne).

<ytd> 
  - Koøenovı prvek; jeho název mùe bıt v zásadì libovolnı, program to (zatím) 
    nekontroluje. Obsahuje všechna nastavení.

<config>
  - Potomek <ytd>; obsahuje základní konfiguraci spoleènou pro grafickou i 
    textovou verzi programu.

  <portable_mode>
    - Potomek <config>; obsahuje logickou hodnotu urèující, jestli YTD pracuje
      v pøenositelném (portable) nebo standardním reimu. Ani jeden z reimù
      nezapisuje do registru Windows, liší se však tím, do kterého XML souboru
      jsou ukládána uivatelská nastavení: v portable reimu se zapisují do 
      souboru "ytd.xml" v adresáøi, ve kterém je program nahrán (a kde tedy 
      musí bıt právo zápisu, pokud se má konfigurace ukládat úspìšnì), ve 
      standardním reimu se ukládají do "ytd.xml" v uivatelském profilu (kde 
      je za bìnıch okolností právo zápisu vdy).
    - Moné hodnoty jsou "1" (zapnout portable reim) a "0" (vypnout).
    - Vıchozí hodnota je "0".

  <language>
    - Potomek <config>; urèuje, jakı jazyk má bıt pouit pro zobrazení textù
      programu. 
    - Monımi hodnotami jsou dvouznakové ISO kódy jazykù, viz sekce Lokalizace
      níe. Povolen je i prázdnı øetìzec, kterı znaèí jazyk podle nastavení
      operaèního systému.
    - Vıchozí hodnota je prázdnı øetìzec (jazyk podle nastavení OS).
    - Pozor: V distribuèním archívu jsou k dispozici jazykové soubory jen pro
      èeštinu ("cs") a angliètinu ("en"); další jazyky èekají na to, a je 
      nìkdo pøeloí.

  <destination_path>
    - Potomek <config>; urèuje, do kterého adresáøe se mají videa ukládat.
    - Monou hodnotou je buï prázdnı øetìzec (znaèí aktuální pracovní adresáø,
      co je obvykle adresáø, ze kterého byl program spuštìn), nebo libovolná
      platná cesta, absolutní ("c:\download") i relativní ("..\downoad").
      V pøípadì portable verze doporuèuji vyhnout se absolutním cestám a 
      pouívat buï prázdnı øetìzec nebo cestu relativní,
    - Vıchozí hodnota je prázdnı øetìzec (aktuální pracovní adresáø).
    - Odpovídá parametru -o na pøíkazové øádce.

  <error_log>
    - Potomek <config>; urèuje, do kterého souboru se bude ukládat seznam URL,
      které se z nìjakého dùvodu nepodaøilo stáhnout.
    - Monou hodnotou je buï prázdnı øetìzec (øíká, e se seznam chybnıch URL
      ukládat nebude) nebo cesta k souboru.
    - Vıchozí hodnota je prázdnı øetìzec (neukládat seznam chyb).
    - Grafická verze programu tuto poloku nepouívá.
    - Odpovídá parametru -e na pøíkazové øádce.

  <overwrite_mode>
    - Potomek <config>; øíká, jak se má program zachovat v pøípadì, e pøi
      ukládání videa narazí na existující soubor.
    - Moné hodnoty jsou:
        "ask" - zeptat se uivatele na akci.
        "never" - pøeskoèit soubor (pøedpoklad: u byl staen døíve).
        "always" - pøepsat soubor (pøedpoklad: pøedchozí verze je chybná).
        "rename" - pojmenovat novı soubor tak, aby mìl jedineèné jméno
                   (pøedpoklad: pùvodní soubor je jinı ne ten, co stahuji 
                   teï).
    - Vıchozí hodnota je "ask" (zeptat se uivatele).
    - Odpovídá parametrùm -k (ask), -n (never), -a (always), -r (rename) na
      pøíkazové øádce.

  <auto_try_html_parser>
    - Potomek <config>; zapíná nebo vypíná podporu pro automatické pouití 
      HTML parseru na neznámá URL - tzn. YTD napøed zkusí, jestli jde o známou 
      adresu, a kdy ne, stáhne ji jako HTML soubor a v nìm zkusí vyhledat
      známé adresy (jako parametr -s). Tím je zajištìna podpora pro servery
      jako Zive.cz nebo Vlaky,net, které svá videa ukládají na cizí servery.
    - Moné hodnoty jsou "1" (povolit automatické pouití HTML parseru)
      nebo "0" (zakázat).
    - Vıchozí hodnota je "1" (povolit automatické pouití HTML parseru).
    - Odpovídá parametrùm -ah (povolit), -ah- (zakázat) na pøíkazové øádce.

  <subtitles_enabled>
    - Potomek <config>; umoòuje vypnout podporu titulkù v celé aplikaci.
    - Moné hodnoty jsou "1" (povolit stahování titulkù) nebo "0" (zakázat).
    - Vıchozí hodnota je "1" (povolit stahování titulkù).

  <download_to_temp_files>
    - Potomek <config>; urèuje, jestli se soubory ukládají rovnou pod svım
      definitivním jménem nebo s dodateènou pøíponou .part, která je po
      skonèení downloadu odstranìna.
    - Moné hodnoty jsou "1" (povolit dodateènou pøíponu) nebo "0" (zakázat).
    - Vıchozí hodnota je "0" (zakázat dodateènou pøíponu).

  <download_to_provider_subdirectories>
    - Potomek <config>; urèuje, jestli se soubory ukládají rovnou do adresáøe
      <destination_path> nebo do jeho podadresáøe podle jména poskytovatele
      médií (tzn. soubory z YouTube do podadresáøe YouTube.com apod.).
    - Moné hodnoty jsou "1" (povolit podadresáøe) nebo "0" (zakázat).
    - Vıchozí hodnota je "0" (zakázat podadresáøe).

  <proxy_server>
    - Potomek <config>; umoòuje nastavit proxy server pro vaši sí. Proxy 
      server je v souèasné dobì podporován a ovìøen pro protokoly HTTP a 
      MMS/RTSP. V pøípadì protokolu RTMP se mi nepodaøilo funkènost ovìøit.

    <active>
      - Potomek <proxy_server>; øíká, jestli je proxy server aktivní (bude
        se pouívat) nebo neaktivní.
      - Moné hodnoty jsou "1" (pouívat proxy) a "0" (nepouívat proxy).
      - Vıchozí hodnota je "0" (nepouívat proxy).

    <host>
      - Potomek <proxy_server>; urèuje adresu, na které proxy server èeká.
      - Moné hodnoty: prázdnı øetìzec (nepouívat proxy) nebo libovolná
        pøípustná internetová adresa (èíselná nebo doménové jméno).
      - Vıchozí hodnota je prázdnı øetìzec (nepouívat proxy).

    <port>
      - Potomek <proxy_server>; urèuje port, na kterém proxy server èeká.
      - Moné hodnoty: èísla od 1 do 65535. Bìné jsou hodnoty 3128, 8080.
      - Vıchozí hodnota je 3128.

    <user>
      - Potomek <proxy_server>; urèuje uivatelské jméno, kterım se svému
        proxy serveru pøihlašujete. Podporováno je pouze pro protokol HTTP
        a jeho funkènost není ovìøena.
      - Monou hodnotou je libovolné platné uivatelské jméno nebo prázdnı
        øetìzec (autorizace se nepouívá).
      - Vıchozí hodnotou je prázdnı øetìzec (autorizace se nepouívá).

    <password>
      - Potomek <proxy_server>; urèuje heslo pro pøihlášení k proxy serveru.
      - Monou hodnotou je jakıkoliv øetìzec.
      - Vıchozí hodnotou je prázdnı øetìzec (bez hesla).

<gui>
  - Potomek <ytd>; obsahuje nastavení specifická pro grafickou verzi programu.
    Za normálních okolností tyto údaje nemìníte ruènì, ale napø. klikáním na
    tlaèítka a podobnì.

  <auto_start_downloads>
    - Potomek <gui>; øíká, jestli se mají novì pøidané odkazy automaticky
      spouštìt nebo jestli si je spustíte sami ruènì tlaèítkem Start.
    - Moné hodnoty jsou "1" (spouštìt automaticky) a "0" (poèkat na ádost
      uivatele).
    - Vıchozí hodnotou je "1" (spouštìt automaticky).

  <check_for_new_version>
    - Potomek <gui>; urèuje, jestli se má program pøi spuštìní grafické verze
      pokusit o zjištìní dostupnosti novìjších verzí. I v pøípadì, e test
      zakáete, mùe program novou verzi zjistit, ale jen na vyádání - buï 
      parametrem -v na pøíkazovém øádku nebo tím, e otevøete okno "O 
      aplikaci".
    - Moné hodnoty jsou "1" (zjišovat verze) a "0" (nezjišovat).
    - Vıchozí hodnotou je "1" (testovat novou verzi).

  <monitor_clipboard>
    - Potomek <gui>; urèuje, jestli má program sledovat zmìny ve schránce
      (clipboardu) a automaticky zaøazovat známá URL do seznamu ke staení.
    - Moné hodnoty jsou "1" (sledovat zmìny) a "0" (nesledovat).
    - Vıchozí hodnotou je "0" (nesledovat zmìny ve schránce).

<modules>
  - Potomek <ytd>. V této sekci se nacházejí specifická nastavení pro 
    jednotlivé poskytovatele.

  <Barrandov_tv>
    - Potomek <modules>; obsahuje nastavení pro TV Barrandov.

    <avoid_hd>
      - Potomek <Barrandov_tv>; urèuje, e se program vùbec nemá pokoušet
        najít HD verzi videa a stáhnout tu, kterou mu server sám pøedhodí.
      - Moné hodnoty jsou "0" (zkoušet vysokou kvalitu) a "1" (nezkoušet).
      - Vıchozí hodnotou je "0" (zkoušet vysokou kvalitu).

  <CeskaTelevize_cz>
    - Potomek <modules>; obsahuje nastavení pro Èeskou televizi.

    <max_bitrate>
      - Potomek <CeskaTelevize_cz>; øíká, jakı maximální bitrate videa má YTD
        stahovat. Ovšem pouze, pokud má na vıbìr - pokud je k dispozici jenom
        kvalitnìjší verze, tak se stáhne kvalitnìjší.
      - Monou hodnotou je libovolné celé èíslo. Pokud je toto èíslo záporné
        nebo nula, budou se stahovat videa s libovolnım bitrate.
        Èeská televize nyní (6.3.2012) pouívá bitraty 2000, 1000 a 500.
      - Vıchozí hodnotou je "0" (neomezovat bitrate).

  <Nova_cz>
    - Potomek <modules>; obsahuje nastavení pro TV Nova.

    <low_quality>
      - Potomek <Nova_cz>; urèuje, jestli se má video stahovat v nízké kvalitì
        místo standardní vysoké. Dùvod je ten, e nìkterá videa (k 24.3.2011
        napø. "Ordinace v rùové zahradì 2 - díl 250") nejsou ve vysoké kvalitì
        k dispozici a YTD nemá šanci toto spolehlivì zjistit.
      - Moné hodnoty jsou "0" (vysoká kvalitu) a "1" (nízká kvalita).
      - Vıchozí hodnotou je "0" (vysoká kvalita).

    <secret>
      - Potomek <Nova_cz>; definuje tajné heslo pouívané pro autentizaci
        pøehravaèe. Bez tohoto hesla nelze videa pøehrávat ani stahovat. 
        K získání hesla se nebudu z právních dùvodù vyjadøovat, pouijte 
        Google nebo jinı vyhledávací nástroj.
      - Moná je jakákoliv hodnota.
      - Vıchozí hodnotou je prázdnı øetìzec (kterı ovšem nebude fungovat).

  <YouTube_com>
    - Potomek <modules>; obsahuje nastavení pro YouTube.

    <max_video_width>
      - Potomek <YouTube_com>; urèuje maximální horizontální rozlišení videa,
        které se mùe stahovat. Videa s vyšším rozlišením budou ignorována.
      - Monou hodnotou je libovolné celé èíslo. Pokud je toto èíslo záporné
        nebo nula, budou se stahovat videa s libovolnım rozlišením.
      - Vıchozí hodnotou je "0" (neomezovat rozlišení).

    <max_video_height>
      - Potomek <YouTube_com>; urèuje maximální vertikální rozlišení videa,
        které se mùe stahovat. Videa s vyšším rozlišením budou ignorována.
      - Monou hodnotou je libovolné celé èíslo. Pokud je toto èíslo záporné
        nebo nula, budou se stahovat videa s libovolnım rozlišením.
      - Vıchozí hodnotou je "0" (neomezovat rozlišení).

    <preferred_languages>
      - Potomek <YouTube_com>; urèuje preferované jazyky pro stahování titulkù
        a jejich prioritu. Pokud jsou v nìm k dispozici, stahují se titulky 
        z nejvíce preferovaného (prvního v poøadí) jazyka, jinak z druhého,
        atd., a pokud neuspìje ádnı preferovanı jazyk, stáhnou se první
        dostupné titulky bez ohledu na jazyk.
      - Oèekává se hodnota ve tvaru "jazyk1,jazyk2,jazyk3" - tzn. øetìzec
        zkratek jazykù oddìlenıch èárkou (pouze èárkou, bez mezer!). Zkratky
        jsou pravdìpodobnì ve formátu ISO, ovìøeno je "cs" pro èeštinu a "en"
        pro angliètinu. Pøíkladem tedy mùe bıt hodnota "cs,en".
      - Vıchozí hodnotou je "en" (preferovat titulky v angliètinì).

    <avoid_webm>
      - Potomek <YouTube_com>; urèuje, jestli se mají stahovat videa i ve
        formátu (kontejneru) .webm.
      - Moné hodnoty jsou "1" (nestahovat WebM) nebo "0" (stahovat).
      - Vıchozí hodnota je "0" (stahovat).

  - Všichni poskytovatelé mají následující nastavení:

    <subtitles_enabled>
      - Potomek konkrétního poskytovatele; umoòuje vypnout podporu titulkù 
        pro tohoto konkrétního poskytovatele.
      - Moné hodnoty jsou "1" (povolit stahování titulkù) nebo "0" (zakázat).
      - Vıchozí hodnota je "1" (povolit stahování titulkù).

    <convert_subtitles>
      - Potomek konkrétního poskytovatele; øíká, jestli se titulky mají nebo 
        nemají konvertovat z vıchozího formátu serveru do formátu .srt.
      - Moné hodnoty jsou "1" (povolit konverzi) nebo "0" (zakázat).
      - Vıchozí hodnota je "1" (povolit konverzi).

    <live_stream>
      - Potomek konkrétního poskytovatele; urèuje, jestli se video stream 
        stahuje jako ivé video nebo jako soubor. Hlavní rozdíl je v tom, e
        soubor se stahuje mnohem rychleji, ale je náchylnı na pøesnou
        synchronizaci mezi serverem a klientem a mùe vést k rozpadu obrazu
        a/nebo zvuku.
      - Pozn.: Má smysl pouze pro poskytovatele fungující na protokolu RTMP.
      - Moné hodnoty jsou "0" (stahovat jako soubor) a "1" (ivé video).
      - Vıchozí hodnotou je "1" (stahovat jako ivé video).

    <secure_token>
      - Potomek konkrétního poskytovatele; definuje tzv. SecureToken, kterı 
        pouívá pøehravaè poskytovatele k identifikaci oprávnìného klienta. 
        Bez tohoto tokenu nelze videa pøehrávat ani stahovat. K získání tokenu
        se nebudu z právních dùvodù vyjadøovat, pouijte Google nebo jinı
        vyhledávací nástroj.
      - Pozn.: Má smysl pouze pro poskytovatele, kteøí ho vyadují.
      - Moná je jakákoliv hodnota.
      - Vıchozí hodnotou je prázdnı øetìzec (kterı ovšem nebude fungovat).

    <username>
      - Potomek konkrétního poskytovatele; urèuje vaše pøihlašovací jméno u
        tohoto poskytele.
      - Moná je jakákoliv hodnota.
      - Pozn.: Má smysl pouze pro poskytovatele, kteøí vyadují pøihlášení.
      - Vıchozí hodnotou je prázdnı øetìzec.

    <password>
      - Potomek konkrétního poskytovatele; urèuje vaše pøihlašovací heslo u
        tohoto poskytele.
      - Pozn.: Má smysl pouze pro poskytovatele, kteøí vyadují pøihlášení.
      - Moná je jakákoliv hodnota.
      - Vıchozí hodnotou je prázdnı øetìzec.


<converters>
  - Potomek <ytd>. V této sekci jsou nadefinovány parametry jednotlivıch 
    konvertovaèù (aplikací volanıch funkcí Konverze nebo automaticky po
    stáhnutí filmu).

  <activated>
    - Potomek <converters>; slouí programu jako dùkaz, e uivatel èetl 
      dokumentaci a je si tudí vìdom toho, e konvertování nebude fungovat
      samo od sebe, ale je tøeba ho napøed vhodnım zpùsobem nastavit.
    - Moné hodnoty jsou "0" (konvertery nejsou aktivovány) a "1" (jsou).
    - Vıchozí hodnotou je "0" (konvertory nejsou aktivovány).

  <selected>
    - Potomek <converters>; urèuje, kterı konvertovaè se má automaticky pouít
      pro všechny stáhnuté filmy.
    - Moné hodnoty jsou prázdnı øetìzec (automatická konverze se nebude
      provádìt) nebo nìkterá hodnota atributu "id" poloek <converter> (viz
      dále).
    - Vıchozí hodnotou je prázdnı øetìzec (neprovádìt automatické konverze).

  <max_threads>
    - Potomek <converters>; urèuje, maximálnì kolik automatickıch konverzních 
      úloh smí soubìnì probíhat. Doporuèuji nechat zde hodnotu 1, a pokud u
      ji budete zvyšovat, nezvyšujte ji nad poèet procesorù ve vašem poèítaèi.
      I to mùe bıt pøíliš, pokud chcete mít rychlou odezvu systému.
    - Moné hodnoty jsou èísla od nuly vıše, pøièem nula vypíná automatické
      konverze.
    - Vıchozí hodnotou je 1.

  <converter>
    - Potomek <converters>; kadı vıskyt této poloky definuje jeden konkrétní 
      konvertovaè. Kadı konvertovaè musí mít atribut "id" s nìjakou jedineènou 
      hodnotou, která bude pouita do <selected>.

    <title>
      - Potomek <converter>; obsahuje název, kterı se bude zobrazovat uivateli
        ve formuláøi pro vıbìr konvertovaèe.
      - Monou hodnotou je libovolnı øetìzec. Program sám s ním nijak nepracuje,
        jen ho zobrazuje uivateli, proto je vhodné zvolit nìco popisného.
      - Vıchozí hodnotou je prázdnı øetìzec.

    <exe_path>
      - Potomek <converter>; urèuje název programu nebo skriptu, kterı se má 
        spustit. Pokud není program v PATH nebo v adresáøi YouTube Downloaderu,
        musí zde bıt uvedena celá cesta.
      - Monou hodnotou je libovolná cesta, mùe obsahovat i mezery (v takovém
        pøípadì ji NEDÁVEJTE do uvozovek).
      - Vıchozí hodnotou je prázdnı øetìzec.

    <command_line>
      - Potomek <converter>; obsahuje pøíkazovou øádku, která bude programu
        pøedána. Kromì pevnıch parametrù (napø. -ovc copy -oac copy) zde mohou
        bıt i promìnné, které YouTube Downloader nahradí skuteènımi údaji.
        Jsou to:

          {$FULLPATH} .... celá cesta k souboru
          {$FILENAME} .... pouze název souboru bez cesty
          {$FILEPATH} .... jen adresáø souboru (cesta souboru bez názvu)
          {$FILEEXT} ..... pøípona souboru, vèetnì teèky
          {$FILENOEXT} ... název souboru bez cesty a bez pøípony
          {$TITLE} ....... název filmu (napø. pro úèely tagování)


      - Monou hodnotou je libovolnı øetìzec, i prázdnı.
      - Vıchozí hodnotou je prázdnı øetìzec.

    <visibility>
      - Potomek <converter>; urèuje, jak se má konvertovaè spouštìt.
      - Moné hodnoty jsou "visible" (standardní spuštìní), "minimized"
        (konvertovaè se spustí normálnì, ale jeho okno bude minimalizováno)
        a "hidden" (konvertovaè se spustí neviditelnì).
      - Vıchozí hodnota je "minimized".



9. SYNTAXE PØÍKAZOVÉHO ØÁDKU
----------------------------

  ytd.exe <param> [<param>] [<param>] ...

  kde <param> je buï URL, nebo jedna z následujících moností:

    -h, -? ........ Zobrazí nápovìdu.
    -i <soubor> ... Stáhne všechna URL z textového souboru <soubor>, kde
                    kadı øádek reprezentuje jednu URL.
    -o <cesta> .... Soubory se budou stahovat do adresáøe <cesta>. Vıchozí
                    hodnotou je aktuální pracovní adresáø.
    -e <soubor> ... Do souboru <soubor> se budou zapisovat všechny downloady,
                    které skonèily chybou.
    -s <zdroj> .... <zdroj> (soubor nebo URL) se prohledá na podporované
                    odkazy a ty nalezené se stáhnou.
    -n ............ Nikdy nepøepisovat existující soubory.
    -a ............ Vdy pøepsat existující soubory.
    -r ............ Pokud soubor se stejnım názvem existuje, automaticky
                    vygenerovat novı název, kterı u bude jedineènı.
    -k ............ Pokud soubor existuje, zeptat se uivatele (vıchozí).
    -l ............ Zobrazí seznam podporovanıch poskytovatelù médií.
    -v ............ Zkontroluje dostupnost novìjší verze programu.
    -u ............ Pokud existuje novìjší verze, stáhne ji a zaktualizuje se.
                    Pozor, po aktualizaci byste nemìli YTD tak pùl sekundy
                    spouštìt, aby mìl pøíleitost pøepsat svùj .exe soubor
                    novou verzí.
    -ah[-] ........ (Ne-) pokusit se pouít HTML parser na neznámá URL.


  Napø.: ytd.exe "http://www.youtube.com/watch?v=6wXkI4t7nuc"
         ytd.exe -i c:\temp\seznam.txt
         ytd.exe -a "http://www.youtube.com/watch?v=6wXkI4t7nuc"

  Pokud nejsou uvedeny parametry, spustí se grafická verze programu.

  K dispozici jsou i tøi speciální parametry, slouící pro instalace resp.
  aktualizace programu. Nejsou zdokumentovány, zájemce odkazuji na funkci
  FindStartupType v YTD.dpr.



10. NÁVRATOVÉ KÓDY
------------------

Verze pro pøíkazovı øádek podporuje návratové kódy (errorlevel). Moné hodnoty
jsou:

  0 ..... Operace a všechny downloady probìhly úspìšnì. 
          Pozor! V pøípadì stahování z playlistu nebo ze souboru s URL staèí,
          aby se úspìšnì stáhnul libovolnı odkaz. Pokud chcete vyuívat 
          návratové kódy, je vhodné stahovat vdy jen jeden soubor a pro více
          souborù zavolat víckrát YouTube Downloader.
  1 ..... Chyba pøi kterémkoliv downloadu.
  2 ..... Nebyly nalezeny ádné pouitelné URL.
  3 ..... Neplatná syntaxe. Byl uveden neznámı parametr nebo nebyla uvedena
          povinná hodnota parametru (napø. pro parametr -i, viz vıše).
  4 ..... Chybnı obsah parametru. Chyba je vyvolána u parametrù s povinnou
          hodnotou, pokud sice hodnota je zadána, ale její obsah není oèekáván
          - napø. pokud za parametru -i zadáte název neexistujícího souboru).
  5 ..... Nepodaøilo se zjistit nebo stáhnout aktuální verzi.
  253 ... Instalace nebo upgrade selhala.
  254 ... Aplikace byla pøerušena z popudu uivatele.
  255 ... V aplikaci došlo k vıjimce, tzn. chyba v programu.



11. LOKALIZACE
--------------

Pro lokalizaci pouívá YouTube Downloader GNU GetText. Pro pøípadné zájemce
to znamená, e pokud GetText znáte, mùete se okamitì pustit do tvorby nového
pøekladu. Pokud zatím GetText neznáte, doporuèuji se s ním seznámit, protoe
jde o jeden z nejrozšíøenìjších lokalizaèních nástrojù. Jedinı problém je,
najít nìjakı srozumitelnı návod - ty, co jsem našel, jsou vesmìs dost obtínì
èitelné, pokud u dopøedu nevíte, o co v GetTextu jde. Ale s vhodnım nástrojem,
jako je napø. POEdit (http://www.poedit.net/), se to dá zvládnout za pochodu.

Pro pøekládání budete potøebovat soubor "default.pot", kterı obsahuje základní
(nepøeloené) texty. Najdete ho v adresáøi "Source\Locale". Pomocí POEditu nebo
jiného nástroje (klidnì si vystaèíte i s Notepadem, akorát to bude nepohodlné)
ho uloíte do souboru "default.po" (.pot je vzor, .po je pracovní soubor) ,
v nìm jednotlivé texty pøeloíte a hotovı pøeklad pak zkompilujete do souboru
"default.mo". Tento soubor pak ulote do adresáøe "(exe)\Locale\(jazyk)\LC_MESSAGES",
kde:
   - "(exe)" je adresáø, ve kterém je uloenı "ytd.exe"
   - "(jazyk)" je adresáø pojmenovanı podle dvouznakové ISO zkratky jazyka;
     pro èeštinu to je "cs", pro angliètinu "en", další si mùete dohledat na
     Wikipedii: http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes

Pokud jde o jazyk, pro kterı jsou nastavena vaše Windows, mìl by se pouít
automaticky pøi pøíštím spuštìní YTD. Pøípadnì si mùete vynutit pouití
tohoto jazyka pomocí nastavení "Language" v INI souboru (viz vıše).

Pokud mi svùj pøeklad pošlete (budu potøebovat oba soubory, "default.mo"
i "default.po"), rád ho zaøadím do budoucích verzí YouTube Downloaderu.



12. PODPORA
-----------

Podporu naleznete na následujících stránkách:

- Pepakovo fórum: 
  http://forum.pepak.net
- Stránka YouTube Downloader: 
  http://www.pepak.net/ytd
- Stránka YouTube Downloader - podpora: 
  http://www.pepak.net/ytd/youtube-downloader-podpora/



13. KOMPILACE
-------------

Na domácí stránce programu naleznete i jeho zdrojovı kód, kterı si mùete sami
zkompilovat. Kód je zcela sobìstaènı v tom smyslu, e nevyaduje nainstalovanou
ádnou komponentu tøetích stran - vystaèí si s komponentami, které jsou dodány
ve standardní instalaci pøíslušného programovacího jazyka. 

Podporovány jsou následující kompilátory:

- Delphi 5.0
- Delphi 2009
- FreePascal

Program by mìl jít s minimálními úpravami zkompilovat i na ostatních verzích
Delphi od 5.0 vıše, protoe ale tyto verze nemám k dispozici, nemohl jsem je
vyzkoušet.

Doporuèenım zpùsobem, jak YouTube Downloader zkompilovat, je skript BUILD.BAT
v adresáøi SOURCE, kterı se postará o všechny závislosti a specifika 
jednotlivıch verzí kompilátorù (více o tom níe). Skript pøijímá (volitelnì)
následující parametry:

  -? ............ Zobrazit nápovìdu.
  -h ............ Zobrazit nápovìdu.

  -delphi ....... Pro kompilaci pouít Delphi (obecnou verzi). Kompiluje se 
                  pøíkazem DCC32, kterı musí bıt v cestì (PATH).
  -fpc .......... Pro kompilaci pouít FreePascal. Kompiluje se pøíkazem FPC,
                  kterı musí bıt v cestì (PATH).

  -cli .......... Do programu bude zahrnuta command-line verze.
  -nocli ........ Do programu nebude zahrnuta command-line verze.
  -gui .......... Do programu bude zahrnuta grafická verze.
  -nogui ........ Do programu nebude zahrnuta grafická verze.
  -xxx .......... Do programu bude zahrnuta podpora pro porno providery.
  -noxxx ........ Do programu nebude zahrnuta podpora pro porno providery.
  -setup ........ Do programu bude zahrnut kód pro instalace a upgrade.
  -nosetup ...... Do programu nebude zahrnut kód pro instalace a upgrade.

  (a nìkolik dalších parametrù, které jsou nedokumentované a nedoporuèené)

Pokud chcete YouTube Downloader zkompilovat pøímo z Delphi IDE, napø. za úèelem
ladìní, je to také moné, ale pro kadou verzi Delphi je tøeba ponìkud odlišné
nastavení adresáøù v Project Options; Search path se liší v nìkolika polokách:

- Cesta "lib\pepak\delphi5" MUSÍ bıt na prvním místì v Delphi 5.0 (a podle
  diskusí na webu i Delphi 6.0) a NESMÍ bıt vùbec uvedena ve vyšších verzích.
- Cesta ke knihovnì DxGetText se liší podle kompilátoru:
  - Delphi 5.0 - "lib\dxgettext\delphi5"
  - Delphi 2009 - "lib\dxgettext\delphi2009"
  - FreePascal - "lib\dxgettext\fpc"
  - ostatní - buï "lib\dxgettext" (verze mezi 5.0 a 2009) nebo jako Delphi 2009

Pro FreePascal není podporováno grafické prostøedí (DEFINE NO_GUI v ytd.inc).



14. NAPSALI O PROGRAMU
----------------------

http://blog.zarohem.cz/clanek.asp?cislo=1605
http://www.grafika.cz/art/vse/youtube_downloader_074.html
http://pctuning.tyden.cz/component/content/article/1-aktualni-zpravy/20761-navod-stahujeme-videa-i-cele-playlisty-nejen-z-youtube
http://technet.idnes.cz/cesky-program-vam-stahne-a-ulozi-videa-z-novy-primy-ct-i-streamu-pwp-/software.aspx?c=A110424_154633_software_dvr
http://streamdownload.okamzite.eu/youtube-downloader-zvladne-i-ceske-televize/
http://extrawindows.cnews.cz/youtube-downloader-stahujte-video-i-z-ceskych-webu
http://magazin.stahuj.centrum.cz/youtube-downloader-stahujte-videa-i-z-ceskych-webu/



15. LICENCE
-----------

YouTube Downloader je publikován pod tzv. novou BSD licencí. Její text 
naleznete v souboru DOC/LICENSE.TXT.

Pokud potøebujete program pøelicencovat pod jinou licenci, dejte mi vìdìt.

Komponenty tøetích stran, umístìné v adresáøi SOURCE/LIB, se øídí svımi 
vlastními licencemi. Z tohoto dùvodu nelze pouít licenci GNU GPL (ádnou
verzi) ani na YouTube Downloader, ani na odvozené programy!

Knihovny a jejich licence:

- DxGetText
  - autoøi: Lars B. Dybdahl, Peter Thörnqvist
  - zdroj: http://dxgettext.po.dk/
  - licence: vlastní, freeware
  - popis: Podpora pro lokalizace (další jazyky) programu

- FastMM
  - autor: Pierre le Riche
  - zdroj: http://fastmm.sourceforge.net/
  - licence: GNU LGPL 2.1 / Mozilla Public License 1.1
  - popis: Rychlejší pamìovı manaer (pouívá se jen v DEBUG reimu kvùli
           schopnosti odhalit chybné alokace a dealokace pamìti).

- lkJSON
  - autor: Leonid Koninin
  - zdroj: http://sourceforge.net/projects/lkjson/files
  - licence: BSD
  - popis: Knihovna pro práci s JSON

- MSDL
  - autor: Jun "metro" Oyama (me_t_ro@yahoo.com)
  - zdroj: http://msdl.sourceforge.net/
  - licence: GNU GPL v3
  - popis: Nástroj pro stahování protokolù MMS, RTSP a jejich variant

- MSDL_DLL
  - autor: Pepak
  - zdroj: http://www.pepak.net/download/youtube-downloader/
  - licence: GNU GPL v3
  - popis: MSDL upravené tak, aby se volalo jako DLL knihovna

- NativeXml
  - autor: Nils Haeck
  - zdroj: http://www.simdesign.nl/xml.html
  - licence: vlastní, freeware
  - Práce s XML

- PerlRegEx
  - autor: Jan Goyvaerts
  - zdroj: http://www.regular-expressions.info/delphi.html
  - licence: Mozilla Public License 1.1
  - popis: Vyhodnocování regulárních vırazù

- RTMPDUMP
  - autoøi: Andrej Stepanchuk, Howard Chu
  - zdroj: http://rtmpdump.mplayerhq.hu/
  - licence: GNU GPL v2
  - popis: Nástroj pro stahování protokolu RTMP a jeho variant.

- RTMPDUMP_DLL
  - autor: Pepak
  - zdroj: http://www.pepak.net/download/youtube-downloader/
  - licence: GNU GPL v2
  - popis: RTMPDUMP upravenı tak, aby se volal jako DLL knihovna

- Silk Icon Pack
  - autor: Mark James
  - zdroj: http://www.famfamfam.com/lab/icons/silk/
  - licence: Creative Common Attribution 2.5
  - popis: Ikonky Silk pouité v grafické verzi programu.

- Synapse
  - autor: Lukáš Gebauer
  - zdroj: http://synapse.ararat.cz/
  - licence: vlastní, freeware
  - popis: Práce s TCP/IP, HTTP a dalšími síovımi protokoly

Jazykové verze:

- Slovenština: Vladimír Kubala (kubalav@gmail.com).

Grafika:

- Ikonku programu vytvoøil uivatel KRYSPIN ze serveru Hofyland.cz.
